### задать значение по умолчанию
```
    CREATE TABLE progress
        ( 
            ...
            mark numeric( 1 ) DEFAULT 5,
            ...
        );
```

# Ограничения

### 1. CHECK
```
        Это ограничение бывает двух видов: уровня атрибута и уровня таблицы.
    В первом случае ограничение CHECK является частью определения одного конкретного атрибута, а во втором
    случае оно записывается как самостоятельный элемент определения таблицы.
    
        Каждое ограничение имеет имя. Мы можем задать его сами с помощью ключевого слова CONSTRAINT.
    Если же мы этого не сделаем, тогда СУБД сформирует имя автоматически. 
    
    CREATE TABLE progress
        ( 
            ...
            mark numeric( 1 ),
            CONSTRAINT valid_mark CHECK ( mark >= 3 AND mark <= 5 ),
            ...
        );
```

### 2. NOT NULL
```
        Оно означает, что в столбце таблицы, на который наложено это ограничение, должны обязательно присутствовать 
    какие-либо определенные значения.
    
        Как сказано в документации, оно функционально эквивалентно ограничению CHECK ( column_name IS NOT NULL) , 
    но в PostgreSQL создание явного ограничения NOT NULL является более эффективным подходом.
```

### 3. UNIQUE
```
    ограничение уникальности UNIQUE
    
        Такое ограничение, наложенное на конкретный столбец, означает, что все значения, содержащиеся в этом столбце в 
    различных строках таблицы, должны быть уникальными, т.е. не должны повторяться.
    
        Ограничение уникальности может включать в себя и несколько столбцов. В этом случае уникальной должна быть уже 
    комбинация их значений.
    
    CREATE TABLE students
        (
            ... 
            record_book numeric( 5 ) UNIQUE,
            ...
        );

    CREATE TABLE students
        ( 
            ...
            record_book numeric( 5 ),
            ...
            CONSTRAINT unique_record_book UNIQUE ( record_book ),
            ...
        );

    CREATE TABLE students
        (
            ...
            doc_ser numeric( 4 ),
            doc_num numeric( 6 ),
            ...
            CONSTRAINT unique_passport UNIQUE ( doc_ser, doc_num ),
            ...
        );
        
        При добавлении ограничения уникальности автоматически создается индекс на основе B-дерева для поддержки этого 
    ограничения.
```

### 4. PRIMARY KEY
```
        Ключ может быть как простым, т.е. включать только один атрибут, так и составным, т.е. включать более одного 
    атрибута. При этом в отличие от уникального ключа, определяемого с помощью ограничения UNIQUE, атрибуты, входящие в 
    состав первичного ключа, не могут иметь значений NULL. Таким образом, определение первичного ключа эквивалентно 
    определению уникального ключа, дополненного ограничением NOT NULL. Однако не стоит в реальной работе заменять 
    первичный ключ комбинацией ограничений UNIQUE и NOT NULL, поскольку теория баз данных требует наличия в каждой 
    таблице именно первичного ключа.
    
        Первичный ключ является частью метаданных, его наличие позволяет другим таблицам использовать его в качестве 
    уникального идентификатора строк в данной таблице.
    
    CREATE TABLE students
        ( 
            record_book numeric( 5 ) PRIMARY KEY,
            ...
        );
        
    CREATE TABLE students
        ( 
            record_book numeric( 5 ),
            ...
            PRIMARY KEY ( record_book )
        );

    В случае создания составного первичного ключа: PRIMARY KEY ( имя-столбца1, имя-столбца2, ...)
    
    При добавлении первичного ключа автоматически создается индекс на основе B-дерева для поддержки этого ограничения.
    
        В таблице может быть любое число ограничений UNIQUE, дополненных ограничением NOT NULL, но первичный ключ может 
    быть только один. 
    
        PostgreSQL допускает и отсутствие первичного ключа, хотя строгая теория реляционных баз данных не рекомендует 
    так поступать
```

### 5. внешний ключ (Foreign Key)
```
        Внешние ключи являются средством поддержания так называемой ссылочной целостности (referential integrity) между
    связанными таблицами.
    
    Внешний ключ ссылающейся таблицы ссылается на первичный ключ ссылочной таблицы.
        
    Допускается ссылка и на уникальный ключ, не являющийся первичным.
    
        CREATE TABLE progress
            ( 
                record_book numeric( 5 ) REFERENCES students ( record_book ),
                ...
            );    
            
    Предложение REFERENCES создает ограничение ссылочной целостности   
    
        Поскольку внешний ключ в нашем примере ссылается на первичный ключ, можно использовать сокращенную форму записи 
    этого ограничения:        
        CREATE TABLE progress
            ( 
                record_book numeric( 5 ) REFERENCES students,
                ...
            );
    
    Можно определить внешний ключ и в форме ограничения уровня таблицы:
        CREATE TABLE progress
            ( 
                record_book numeric( 5 ),
                ...
                FOREIGN KEY ( record_book )
                REFERENCES students ( record_book )
            );     
```

#### ON DELETE CASCADE :: Каскадное удаление
```
    CREATE TABLE progress
        ( 
            record_book numeric( 5 ),
            ...
            FOREIGN KEY ( record_book )
            REFERENCES students ( record_book )
            ON DELETE CASCADE
        );
```

#### ON DELETE RESTRICT или ON DELETE NO ACTION :: Запрет удаления строки
```    
    Если в определении внешнего ключа не предписано конкретное действие, то по умолчанию используется NO ACTION
    
    Отличие между этими двумя вариантами лишь в том, что при использовании NO ACTION можно отложить проверку выполнения 
    ограничения на более поздний срок в рамках транзакции, а в случае RESTRICT проверка выполняется немедленно.
    
    операция удаления будет отменена, и будет выведено сообщение об ошибке
    
    CREATE TABLE progress
        ( 
            record_book numeric( 5 ),
            ...
            FOREIGN KEY ( record_book )
            REFERENCES students ( record_book )
            ON DELETE RESTRICT
        );
    
    или:
    
    CREATE TABLE progress
        ( 
            record_book numeric( 5 ),
            ...
            FOREIGN KEY ( record_book )
            REFERENCES students ( record_book )
        );
```

#### Присваивание NULL
```
    Для реализации этого подхода необходимо, чтобы на атрибуты внешнего ключа не было наложено ограничение NOT NULL.
    
    CREATE TABLE progress
        ( 
            record_book numeric( 5 ),
            ...
            FOREIGN KEY ( record_book )
            REFERENCES students ( record_book )
            ON DELETE SET NULL
        );
```

#### Присваивание DEFAULT если оно, было предписано при создании таблицы.
```
    CREATE TABLE progress
        ( 
            record_book numeric( 5 ) DEFAULT 12345,
            ...
            FOREIGN KEY ( record_book )
            REFERENCES students ( record_book )
            ON DELETE SET DEFAULT
        );
```